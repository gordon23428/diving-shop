{"version":3,"sources":["webpack:///./src/components/order-page/CustomCheckout.vue","webpack:///./src/components/order-page/CustomCheckout.vue?b62f"],"names":["class","colspan","width","data-bs-toggle","data-bs-target","id","tabindex","aria-labelledby","aria-hidden","type","data-bs-dismiss","aria-label","order","products","item","key","product","title","qty","unit","final_total","total","user","email","name","tel","address","is_paid","payOrder","data","orderId","coupon_code","confirmModal","methods","getOrder","vm","this","url","isLoading","$http","get","then","response","console","log","post","success","$store","commit","$router","push","hide","created","$route","params","mounted","document","getElementById","render"],"mappings":"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","file":"js/chunk-2d208323.3188f854.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"my-5 row justify-content-center\">\r\n        <table class=\"table\">\r\n          <thead>\r\n            <th>項目</th>\r\n            <th>人數</th>\r\n            <th>單價</th>\r\n          </thead>\r\n          <tbody>\r\n            <tr v-for=\"item in order.products\" :key=\"item.id\">\r\n              <td class=\"align-middle\">{{ item.product.title }}</td>\r\n              <td class=\"align-middle\">{{ item.qty }}/{{ item.product.unit }}</td>\r\n              <td class=\"align-middle text-right\">{{ item.final_total }}</td>\r\n            </tr>\r\n          </tbody>\r\n          <tfoot>\r\n            <tr>\r\n              <td colspan=\"2\" class=\"text-right\">總計</td>\r\n              <td class=\"text-right\">{{ order.total }}</td>\r\n            </tr>\r\n          </tfoot>\r\n        </table>\r\n        <table class=\"table\">\r\n          <tbody>\r\n            <tr>\r\n              <th width=\"100\">Email</th>\r\n              <td>{{ order.user.email }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th>姓名</th>\r\n              <td>{{ order.user.name }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th>收件人電話</th>\r\n              <td>{{ order.user.tel }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th>收件人地址</th>\r\n              <td>{{ order.user.address }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th>付款狀態</th>\r\n              <td>\r\n                <span v-if=\"!order.is_paid\">尚未付款</span>\r\n                <span v-else class=\"text-success\">付款完成</span>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n        <div class=\"text-right\" v-if=\"order.is_paid === false\">\r\n          <button class=\"btn btn-danger\" data-bs-toggle=\"modal\" data-bs-target=\"#confirmModal\">確認付款去</button>\r\n        </div>\r\n    </div>\r\n    <!-- Modal -->\r\n    <div class=\"modal fade\" id=\"confirmModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">確認付款</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            請確認認定單內容後再按下確認\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"payOrder\">確認</button>\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">取消</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Modal } from 'bootstrap'\r\nexport default {\r\n  data () {\r\n    return {\r\n      orderId: '',\r\n      order: {\r\n        user: { }\r\n      },\r\n      coupon_code: '',\r\n      confirmModal: ''\r\n    }\r\n  },\r\n  methods: {\r\n    getOrder () {\r\n      const vm = this\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/order/${vm.orderId}`\r\n      vm.isLoading = true\r\n      this.$http.get(url).then((response) => {\r\n        vm.order = response.data.order\r\n        console.log(vm.order)\r\n        vm.isLoading = false\r\n      })\r\n    },\r\n    payOrder () {\r\n      const vm = this\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/pay/${vm.orderId}`\r\n      vm.isLoading = true\r\n      this.$http.post(url).then((response) => {\r\n        if (response.data.success) {\r\n          this.$store.commit('setMod', 3)\r\n          vm.$router.push(`/checkout/finish/${vm.orderId}`)\r\n        }\r\n        vm.confirmModal.hide()\r\n        vm.isLoading = false\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.orderId = this.$route.params.orderId\r\n    this.getOrder()\r\n  },\r\n  mounted () {\r\n    this.confirmModal = new Modal(document.getElementById('confirmModal'))\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CustomCheckout.vue?vue&type=template&id=4fc019ac\"\nimport script from \"./CustomCheckout.vue?vue&type=script&lang=js\"\nexport * from \"./CustomCheckout.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}