{"version":3,"sources":["webpack:///./src/views/Favorite.vue","webpack:///./src/views/Favorite.vue?88ec","webpack:///./node_modules/core-js/modules/es.array.find-index.js"],"names":["class","id","tabindex","aria-labelledby","aria-hidden","type","data-bs-dismiss","aria-label","role","favorProducts","item","key","data-bs-toggle","data-bs-target","getId","style","imageUrl","category","title","content","price","origin_price","getProduct","status","loadingItem","addToCart","removeFavorite","product","data-dismiss","closeModal","src","alt","description","name","num","value","unit","components","Navbar","Alert","data","isLoading","productModal","delId","methods","vm","this","url","$http","get","then","response","console","log","document","getElementById","show","qty","cart","product_id","post","$store","commit","message","dispatch","hide","index","findIndex","splice","localStorage","setItem","JSON","stringify","created","parse","getItem","render","$","$findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","target","proto","forced","callbackfn","arguments","length","undefined"],"mappings":"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","file":"js/chunk-7e0ddd46.009c4329.js","sourcesContent":["<template>\r\n  <div>\r\n    <Navbar/>\r\n    <Alert/>\r\n    <div class=\"web-background position-fixed top-0\">\r\n      <div class=\"web-img\"></div>\r\n    </div>\r\n    <div class=\" container row col-9 mt-4\">\r\n      <!-- product card -->\r\n      <div class=\"col-md-4 mb-4\" v-for=\"item in favorProducts\" :key=\"item.id\">\r\n      <div class=\"card-product card border-0 position-relative\">\r\n        <span class=\"position-absolute\" data-bs-toggle=\"modal\" data-bs-target=\"#confirmModal\" @click=\"getId(item.id)\" style=\"font-size: 1.5em; color: pink;\">\r\n          <i class=\"fas fa-heart\"></i>\r\n        </span>\r\n        <div style=\"height: 150px; background-size: cover; background-position: center\"\r\n          :style=\"{backgroundImage: `url(${item.imageUrl})`}\">\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <span class=\"badge badge-secondary float-right ml-2\">{{ item.category }}</span>\r\n          <h5 class=\"card-title text-light\">\r\n            {{ item.title }}\r\n          </h5>\r\n          <p class=\"card-text \">{{ item.content }}</p>\r\n          <div class=\"d-flex justify-content-between align-items-baseline\">\r\n            <div class=\"h5 text-light\" v-if=\"!item.price\">{{ item.origin_price }} 元</div>\r\n            <del class=\"h6 text-light\" v-if=\"item.price\">原價 {{ item.origin_price }} 元</del>\r\n            <div class=\"h5 text-light\" v-if=\"item.price\">現在只要 {{ item.price }} 元</div>\r\n          </div>\r\n        </div>\r\n        <div class=\"card-footer d-flex\">\r\n          <button type=\"button\" class=\"btn btn-outline-light btn-sm\" @click=\"getProduct(item.id)\">\r\n            <i class=\"fas fa-spinner fa-spin\" v-if=\"status.loadingItem === item.id\"></i>\r\n            查看更多\r\n          </button>\r\n          <button type=\"button\" class=\"btn btn-outline-warning btn-sm ml-auto\" @click=\"addToCart(item.id)\">\r\n            <i class=\"fas fa-spinner fa-spin\" v-if=\"status.loadingItem === item.id\"></i>\r\n            加到購物車\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- confirmModal -->\r\n    <div class=\"modal fade\" id=\"confirmModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">移除</h5>\r\n            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            確定要移除喜愛的旅程嗎?\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"removeFavorite\" data-bs-dismiss=\"modal\">確定</button>\r\n            <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">取消</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- productModal -->\r\n    <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\"\r\n      aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n      <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">{{ product.title }}</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" @click=\"closeModal\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <img :src=\"product.imageUrl\" class=\"img-fluid\" alt=\"\">\r\n            <blockquote class=\"blockquote mt-3\">\r\n              <p class=\"mb-0\">{{ product.content }}</p>\r\n              <footer class=\"blockquote-footer text-right\">{{ product.description }}</footer>\r\n            </blockquote>\r\n            <div class=\"d-flex justify-content-between align-items-baseline\">\r\n              <div class=\"h4\" v-if=\"!product.price\">{{ product.origin_price }} 元</div>\r\n              <del class=\"h6\" v-if=\"product.price\">原價 {{ product.origin_price }} 元</del>\r\n              <div class=\"h4\" v-if=\"product.price\">現在只要 {{ product.price }} 元</div>\r\n            </div>\r\n            <select name=\"\" class=\"form-control mt-3\" v-model=\"product.num\">\r\n              <option :value=\"num\" v-for=\"num in 10\" :key=\"num\">\r\n                報名 {{num}} {{product.unit}}\r\n              </option>\r\n            </select>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <div class=\"text-muted text-nowrap mr-3\">\r\n              小計 <strong>{{ product.num * product.price }}</strong> 元\r\n            </div>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"addToCart(product.id, product.num)\">\r\n              <i class=\"fas fa-spinner fa-spin\" v-if=\"status.loadingItem === product.id\"></i>\r\n              加到購物車\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Navbar from '@/components/Navbar.vue'\r\nimport Alert from '@/components/AlertMessage.vue'\r\nimport { Modal } from 'bootstrap'\r\nexport default {\r\n  components: {\r\n    Navbar,\r\n    Alert\r\n  },\r\n  data () {\r\n    return {\r\n      favorProducts: [],\r\n      isLoading: false,\r\n      product: {},\r\n      productModal: '',\r\n      delId: '',\r\n      status: {\r\n        loadingItem: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getProduct (id) {\r\n      const vm = this\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/product/${id}`\r\n      vm.status.loadingItem = id\r\n      this.$http.get(url).then((response) => {\r\n        vm.product = response.data.product\r\n        console.log(response.data)\r\n        vm.status.loadingItem = ''\r\n        vm.productModal = new Modal(document.getElementById('productModal'))\r\n        vm.productModal.show()\r\n      })\r\n    },\r\n    addToCart (id, qty = 1) {\r\n      const vm = this\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`\r\n      vm.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty\r\n      }\r\n      this.$http.post(url, { data: cart }).then((response) => {\r\n        console.log(response.data)\r\n        vm.$store.commit('setMessage', [\r\n          response.data.message,\r\n          'success'\r\n        ])\r\n        vm.status.loadingItem = ''\r\n        this.$store.dispatch('getCart')\r\n        vm.productModal.hide()\r\n      })\r\n    },\r\n    getId (id) {\r\n      const vm = this\r\n      vm.getId = id\r\n    },\r\n    removeFavorite () {\r\n      const vm = this\r\n      const index = vm.favorProducts.findIndex(item => item.id === vm.delId)\r\n      vm.favorProducts.splice(index, 1)\r\n      localStorage.setItem('favoriteList', JSON.stringify(vm.favorProducts))\r\n    }\r\n  },\r\n  created () {\r\n    this.favorProducts = JSON.parse(localStorage.getItem('favoriteList')) || []\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./Favorite.vue?vue&type=template&id=31e55aad\"\nimport script from \"./Favorite.vue?vue&type=script&lang=js\"\nexport * from \"./Favorite.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n"],"sourceRoot":""}