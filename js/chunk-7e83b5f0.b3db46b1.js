(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e83b5f0"],{1799:function(e,t,o){"use strict";var c=o("7a23"),a={"aria-label":"Page navigation example"},d={class:"pagination"},r=Object(c["createVNode"])("span",{"aria-hidden":"true"},"«",-1),l=Object(c["createVNode"])("a",{class:"page-link",href:"#","aria-label":"Next"},[Object(c["createVNode"])("span",{"aria-hidden":"true"},"»")],-1);function i(e,t,o,i,n,s){return Object(c["openBlock"])(),Object(c["createBlock"])("div",null,[Object(c["createVNode"])("nav",a,[Object(c["createVNode"])("ul",d,[Object(c["createVNode"])("li",{class:["page-item",{disable:!o.pagination.has_pre}]},[Object(c["createVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(e){return s.emitGetItems(o.pagination.current_page-1)}),["prevent"]))},[r])],2),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(o.pagination.total_pages,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{class:["page-item",{active:o.pagination.current_page===e}],key:e},[Object(c["createVNode"])("a",{class:"page-link",href:"#",onClick:Object(c["withModifiers"])((function(t){return s.emitGetItems(e)}),["prevent"])},Object(c["toDisplayString"])(e),9,["onClick"])],2)})),128)),Object(c["createVNode"])("li",{class:["page-item",{disable:!o.pagination.has_next}],onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(e){return s.emitGetItems(o.pagination.current_page+1)}),["prevent"]))},[l],2)])])])}var n={props:["pagination"],methods:{emitGetItems:function(e){this.$emit("getPage",e)}}};n.render=i;t["a"]=n},f388:function(e,t,o){"use strict";o.r(t);o("a4d3"),o("e01a");var c=o("7a23"),a={class:"text-right mt-4"},d={class:"table mt-4"},r=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",{width:"120"},"分類"),Object(c["createVNode"])("th",null,"產品名稱"),Object(c["createVNode"])("th",{width:"120"},"原價"),Object(c["createVNode"])("th",{width:"120"},"售價"),Object(c["createVNode"])("th",{width:"100"},"是否啟用"),Object(c["createVNode"])("th",{width:"80"},"編輯"),Object(c["createVNode"])("th",{width:"80"},"刪除")])],-1),l={class:"text-right"},i={class:"text-right"},n={key:0,class:"text-success"},s={key:1},u={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},p={class:"modal-dialog modal-lg",role:"document"},b={class:"modal-content border-0"},m=Object(c["createVNode"])("div",{class:"modal-header bg-dark text-white"},[Object(c["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["createVNode"])("span",null,"新增產品")]),Object(c["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),j={class:"modal-body"},O={class:"row"},h={class:"col-sm-4"},g={class:"form-group"},f=Object(c["createVNode"])("label",{for:"image"},"輸入圖片網址",-1),V={class:"form-group"},N={for:"customFile"},v=Object(c["createTextVNode"])("或 上傳圖片 "),y={key:0,class:"fas fa-spinner fa-spin"},k={class:"col-sm-8"},P={class:"form-group"},x=Object(c["createVNode"])("label",{for:"title"},"標題",-1),w={class:"form-row"},M={class:"form-group col-md-6"},B=Object(c["createVNode"])("label",{for:"category"},"分類",-1),C={class:"form-group col-md-6"},U=Object(c["createVNode"])("label",{for:"price"},"單位",-1),D={class:"form-row"},_={class:"form-group col-md-6"},T=Object(c["createVNode"])("label",{for:"origin_price"},"原價",-1),L={class:"form-group col-md-6"},I=Object(c["createVNode"])("label",{for:"price"},"售價",-1),F=Object(c["createVNode"])("hr",null,null,-1),G={class:"form-group"},S=Object(c["createVNode"])("label",{for:"description"},"產品描述",-1),$={class:"form-group"},E=Object(c["createVNode"])("label",{for:"content"},"說明內容",-1),J={class:"form-group"},q={class:"form-check"},H=Object(c["createVNode"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),Q={class:"modal-footer"},W=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-dismiss":"modal"},"取消",-1),z={class:"modal fade",id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},A={class:"modal-dialog",role:"document"},K={class:"modal-content border-0"},R=Object(c["createVNode"])("div",{class:"modal-header bg-danger text-white"},[Object(c["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["createVNode"])("span",null,"刪除產品")]),Object(c["createVNode"])("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[Object(c["createVNode"])("span",{"aria-hidden":"true"},"×")])],-1),X={class:"modal-body"},Y=Object(c["createTextVNode"])(" 是否刪除 "),Z={class:"text-danger"},ee=Object(c["createTextVNode"])(" 商品(刪除後將無法恢復)。 "),te={class:"modal-footer"};function oe(e,t,o,oe,ce,ae){var de=Object(c["resolveComponent"])("loading"),re=Object(c["resolveComponent"])("Pagination");return Object(c["openBlock"])(),Object(c["createBlock"])("div",null,[Object(c["createVNode"])(de,{active:ce.isLoading,"onUpdate:active":t[1]||(t[1]=function(e){return ce.isLoading=e})},null,8,["active"]),Object(c["createVNode"])("div",a,[Object(c["createVNode"])("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=function(e){return ae.openModal(!0)})},"建立新產品")]),Object(c["createVNode"])("table",d,[r,Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(ce.products,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:e.id},[Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.category),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.title),1),Object(c["createVNode"])("td",l,Object(c["toDisplayString"])(e.origin_price),1),Object(c["createVNode"])("td",i,Object(c["toDisplayString"])(e.price),1),Object(c["createVNode"])("td",null,[e.is_enabled?(Object(c["openBlock"])(),Object(c["createBlock"])("span",n,"啟用")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",s,"未啟用"))]),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("button",{class:"btn btn-outline-primary btn-sm",onClick:function(t){return ae.openModal(!1,e)}},"編輯",8,["onClick"])]),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("button",{class:"btn btn-outline-danger btn-sm",onClick:function(t){return ae.deleteModal(!0,e)}},"刪除",8,["onClick"])])])})),128))])]),Object(c["createVNode"])("div",u,[Object(c["createVNode"])("div",p,[Object(c["createVNode"])("div",b,[m,Object(c["createVNode"])("div",j,[Object(c["createVNode"])("div",O,[Object(c["createVNode"])("div",h,[Object(c["createVNode"])("div",g,[f,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":t[3]||(t[3]=function(e){return ce.tempProduct.imageUrl=e}),placeholder:"請輸入圖片連結"},null,512),[[c["vModelText"],ce.tempProduct.imageUrl]])]),Object(c["createVNode"])("div",V,[Object(c["createVNode"])("label",N,[v,ce.status.fileUploading?(Object(c["openBlock"])(),Object(c["createBlock"])("i",y)):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("input",{type:"file",id:"customFile",class:"form-control",ref:"files",onChange:t[4]||(t[4]=function(){return ae.uploadFile&&ae.uploadFile.apply(ae,arguments)})},null,544)]),Object(c["createVNode"])("img",{img:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=828346ed697837ce808cae68d3ddc3cf&auto=format&fit=crop&w=1350&q=80",class:"img-fluid",src:ce.tempProduct.imageUrl,alt:""},null,8,["src"])]),Object(c["createVNode"])("div",k,[Object(c["createVNode"])("div",P,[x,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":t[5]||(t[5]=function(e){return ce.tempProduct.title=e}),placeholder:"請輸入標題"},null,512),[[c["vModelText"],ce.tempProduct.title]])]),Object(c["createVNode"])("div",w,[Object(c["createVNode"])("div",M,[B,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control",id:"category","onUpdate:modelValue":t[6]||(t[6]=function(e){return ce.tempProduct.category=e}),placeholder:"請輸入分類"},null,512),[[c["vModelText"],ce.tempProduct.category]])]),Object(c["createVNode"])("div",C,[U,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"unit",class:"form-control",id:"unit","onUpdate:modelValue":t[7]||(t[7]=function(e){return ce.tempProduct.unit=e}),placeholder:"請輸入單位"},null,512),[[c["vModelText"],ce.tempProduct.unit]])])]),Object(c["createVNode"])("div",D,[Object(c["createVNode"])("div",_,[T,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"number",class:"form-control",id:"origin_price","onUpdate:modelValue":t[8]||(t[8]=function(e){return ce.tempProduct.origin_price=e}),placeholder:"請輸入原價"},null,512),[[c["vModelText"],ce.tempProduct.origin_price]])]),Object(c["createVNode"])("div",L,[I,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":t[9]||(t[9]=function(e){return ce.tempProduct.price=e}),placeholder:"請輸入售價"},null,512),[[c["vModelText"],ce.tempProduct.price]])])]),F,Object(c["createVNode"])("div",G,[S,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":t[10]||(t[10]=function(e){return ce.tempProduct.description=e}),placeholder:"請輸入產品描述"},null,512),[[c["vModelText"],ce.tempProduct.description]])]),Object(c["createVNode"])("div",$,[E,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":t[11]||(t[11]=function(e){return ce.tempProduct.content=e}),placeholder:"請輸入產品說明內容"},null,512),[[c["vModelText"],ce.tempProduct.content]])]),Object(c["createVNode"])("div",J,[Object(c["createVNode"])("div",q,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=function(e){return ce.tempProduct.is_enabled=e}),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[c["vModelCheckbox"],ce.tempProduct.is_enabled]]),H])])])])]),Object(c["createVNode"])("div",Q,[W,Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[13]||(t[13]=function(){return ae.updateProduct&&ae.updateProduct.apply(ae,arguments)})},"確認")])])])]),Object(c["createVNode"])("div",z,[Object(c["createVNode"])("div",A,[Object(c["createVNode"])("div",K,[R,Object(c["createVNode"])("div",X,[Y,Object(c["createVNode"])("strong",Z,Object(c["toDisplayString"])(ce.tempProduct.title),1),ee]),Object(c["createVNode"])("div",te,[Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-dismiss":"modal",onClick:t[14]||(t[14]=function(e){return ae.deleteModal(!1)})},"取消"),Object(c["createVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[15]||(t[15]=function(e){return ae.deleteProduct()})},"確認刪除")])])])]),Object(c["createVNode"])(re,{pagination:ce.pagination,onGetPage:ae.getProducts},null,8,["pagination","onGetPage"])])}o("99af");var ce=o("7b17"),ae=o("1799"),de={components:{Pagination:ae["a"]},data:function(){return{products:[],isLoading:!1,productModal:"",delModal:"",tempProduct:{},pagination:{},delId:"",isNew:!1,status:{fileUploading:!1}}},methods:{getProducts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t="".concat("https://vue-course-api.hexschool.io","/api/").concat("didameath","/products?page=").concat(e),o=this;o.isLoading=!0,this.$http.get(t).then((function(e){o.products=e.data.products,o.isLoading=!1,o.pagination=e.data.pagination}))},openModal:function(e,t){this.productModal.show(),e?(this.tempProduct={},this.isNew=!0):(this.tempProduct=Object.assign({},t),this.isNew=!1)},updateProduct:function(){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("didameath","/admin/product"),t="post",o=this;o.isNew||(e="".concat("https://vue-course-api.hexschool.io","/api/").concat("didameath","/admin/product/").concat(o.tempProduct.id),t="put"),this.$http[t](e,{data:o.tempProduct}).then((function(e){console.log(e.data),e.data.success?(o.productModal.hide(),o.getProducts()):(o.productModal.hide(),o.getProducts(),console.log("新增失敗"))}))},deleteModal:function(e,t){e?(this.delModal.show(),this.delId=t.id):this.delModal.hide()},deleteProduct:function(){var e=this,t=this,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("didameath","/admin/product/").concat(t.delId);this.$http.delete(o).then((function(o){console.log(o.data),e.delModal.hide(),t.getProducts()}))},uploadFile:function(){console.log(this);var e=this.$refs.files.files[0],t=this,o=new FormData;o.append("file-to-upload",e);var c="".concat("https://vue-course-api.hexschool.io","/api/").concat("didameath","/admin/upload");t.status.fileUploading=!0,this.$http.post(c,o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e.data),e.data.success?(t.status.fileUploading=!1,t.tempProduct.imageUrl=e.data.imageUrl):(console.log("error"),t.status.fileUploading=!1)}))}},created:function(){this.getProducts()},mounted:function(){this.delModal=new ce["a"](document.getElementById("delProductModal")),this.productModal=new ce["a"](document.getElementById("productModal"))}};de.render=oe;t["default"]=de}}]);
//# sourceMappingURL=chunk-7e83b5f0.b3db46b1.js.map